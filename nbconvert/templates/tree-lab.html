<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title | default('Voici — Notebooks') }}</title>
    <style>
      :root { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; color-scheme: light; }
      body { margin: 0; padding: 1.5rem; background: #f7f9fb; color: #0b1220; }
      header { display:flex; align-items:center; gap:1rem; }
      .logo { width:48px; height:48px; background:#268380; border-radius:8px; display:inline-block }
      h1 { margin: 0; font-size:1.25rem }
      .subtitle { color:#536171; margin-top:.25rem }
      .search { margin:1rem 0; }
      .tree { display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:1rem }
      .card { background:white; border-radius:8px; padding:0.75rem; box-shadow:0 1px 3px rgba(12,18,24,0.06); }
      .card a { color:#106ba3; text-decoration:none; font-weight:600 }
      .meta { color:#6b7785; font-size:.9rem }
    </style>
  </head>
  <body>
    <header>
      <div class="logo" aria-hidden></div>
      <div>
        <h1>{{ title | default('Voici — Notebooks') }}</h1>
        <div class="subtitle">A static listing of notebooks generated by Voici.</div>
      </div>
    </header>

    <div class="search">
      <input id="q" placeholder="Filter notebooks by name..." style="width:100%;padding:.5rem;border-radius:6px;border:1px solid #d7dde6"> 
    </div>

    <section class="tree" id="tree">
      {%- set files = pages if pages is defined else (items if items is defined else tree_items if tree_items is defined else []) -%}
      {% for f in files %}
        <article class="card" data-title="{{ (f.title or f|string)|lower() }}">
          <div style="display:flex;justify-content:space-between;gap:.5rem;align-items:start">
            <div>
              <a href="{{ f.url if f.url is defined else f.href if f.href is defined else f }}">{{ f.title if f.title is defined else f.name if f.name is defined else (f|string) }}</a>
              {% if f.description %}
                <div class="meta">{{ f.description }}</div>
              {% endif %}
            </div>
            <div class="meta">{{ f.date if f.date is defined else '' }}</div>
          </div>
        </article>
      {% else %}
        <div>No notebooks found.</div>
      {% endfor %}
    </section>

    <script>
      const q = document.getElementById('q');
      q.addEventListener('input', () => {
        const val = q.value.trim().toLowerCase();
        document.querySelectorAll('#tree .card').forEach(card => {
          const title = card.getAttribute('data-title') || '';
          card.style.display = title.includes(val) ? '' : 'none';
        });
      });
    </script>
  </body>
</html>
